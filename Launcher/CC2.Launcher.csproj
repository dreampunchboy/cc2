<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net8.0</TargetFramework>
    <RootNamespace>CC2.Launcher</RootNamespace>
    <AssemblyName>game</AssemblyName>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Steamworks.NET" Version="2024.8.0" />
  </ItemGroup>

  <!-- Copy Steam files to output for local development (dotnet run, F5, etc.) -->
  <!-- Uses bundled steam_api64.dll from Steamworks.NET Standalone (SDK 1.60) for compatibility -->
  <Target Name="CopySteamFiles" AfterTargets="Build">
    <Copy SourceFiles="$(MSBuildProjectDirectory)\lib\steam_api64.dll"
          DestinationFolder="$(OutputPath)"
          SkipUnchangedFiles="true"
          Condition="Exists('$(MSBuildProjectDirectory)\lib\steam_api64.dll')" />
    <!-- steam_appid.txt lets SteamAPI.Init() find your app when running outside Steam -->
    <Copy SourceFiles="$(MSBuildProjectDirectory)\..\steam_appid.txt"
          DestinationFolder="$(OutputPath)"
          SkipUnchangedFiles="true"
          Condition="Exists('$(MSBuildProjectDirectory)\..\steam_appid.txt')" />
  </Target>

</Project>
